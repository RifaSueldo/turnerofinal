<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>TurnoX - Sistema PRE-PAGO de Turnos On Line</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#533482">

  <!-- Iconos -->
  <link rel="apple-touch-icon" href="https://i.ibb.co/LD2Jbgnc/turnox-icon-512.png">
  <link rel="icon" type="image/png" href="https://i.ibb.co/p6Ycq6XC/Turnox-logo.png">

  <style>
    /* Reset y básicos */
    * { box-sizing: border-box; margin:0; padding:0;}
    body { font-family:"Montserrat",sans-serif; background:#533482; color:#fff; min-height:100vh; display:flex; flex-direction:column; align-items:center;}
    h1,h2,h3,h4,p { margin-bottom:10px;}
    a { text-decoration:none; }

    /* Contenedor general */
    .container { max-width:900px; padding:20px; text-align:center; }

    /* Logo animado */
    .logo { font-size:3rem; font-weight:700; color:transparent; position:relative; display:inline-block; margin-bottom:5px; }
    .logo::before {
      content:"TurnoX";
      position:absolute; top:0; left:0; width:100%; height:100%;
      background:linear-gradient(120deg,transparent,rgba(255,255,255,0.9),transparent);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      animation: shine 5s linear infinite;
    }
    @keyframes shine {0%{background-position:200% 0;}100%{background-position:-200% 0;}}

    .subtitle { font-size:1rem; color:#fff; margin-bottom:30px; }

    /* Botones */
    .btn { display:block; width:250px; margin:10px auto; padding:15px 0; font-size:1rem; font-weight:600; color:#533482; background:#fff; border:none; border-radius:8px; cursor:pointer; transition:0.2s; }
    .btn:hover { background:#f2f2f2; transform:translateY(-2px); }
    .btn .sub { display:block; font-size:0.7rem; font-weight:400; color:#CDCDCD; margin-top:2px; }

    /* Secciones informativas */
    section { opacity:0; transform:translateY(20px); transition:1s; margin:40px 0; border-radius:12px; padding:20px; background:rgba(255,255,255,0.05);}
    section.visible { opacity:1; transform:translateY(0); }
    section h2 { color:#fff; margin-bottom:10px; }
    section p { color:#ddd; font-size:0.9rem; line-height:1.4; }

    /* Imagenes de ejemplo */
    .img-ex { width:100%; max-width:800px; margin:10px auto; border-radius:12px; display:block; }

    /* Responsive */
    @media(max-width:480px){
      .btn { width:80%; font-size:0.9rem; padding:12px 0; }
      .logo { font-size:2rem; }
      section { padding:15px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">TurnoX</div>
    <div class="subtitle">Sistema PRE-PAGO de Turnos On Line</div>

    <a href="/register" class="btn">Crear Cuenta</a>
    <a href="/login" class="btn">Ya tengo cuenta</a>
    <a href="/ejemplo" class="btn">Ver Ejemplo</a>
    <button id="instalarApp" class="btn">Descargá la App</button>

    <!-- Secciones informativas -->
    <section class="animate-on-scroll">
      <h2>Cómo crear una cuenta</h2>
      <p>Regístrate con tu email y contraseña para empezar a usar TurnoX.</p>
    </section>

    <section class="animate-on-scroll">
      <h2>Cómo cargar créditos</h2>
      <p>Compra créditos desde la sección “Créditos” para poder reservar turnos pre-pagos.</p>
    </section>

    <section class="animate-on-scroll">
      <h2>Configurar tus turnos</h2>
      <p>Desde “Configuración” define tus horarios, servicios y disponibilidad para tus clientes.</p>
    </section>

    <section class="animate-on-scroll">
      <h2>Cambiar la portada</h2>
      <p>Personaliza tu portada con imágenes y colores que representen tu negocio.</p>
    </section>

    <section class="animate-on-scroll">
      <h2>Visualizar turnos</h2>
      <p>Consulta tus turnos y reservas desde la sección “Turnos” en cualquier momento.</p>
    </section>

    <section class="animate-on-scroll">
      <h2>Accesos rápidos</h2>
      <p>Utiliza los botones de arriba para registrar, iniciar sesión o ver ejemplos de turnos.</p>
    </section>
  </div>

<script>
  // Animación scroll
  const animElements = document.querySelectorAll(".animate-on-scroll");
  function checkScroll(){
    const triggerBottom = window.innerHeight * 0.85;
    animElements.forEach(el=>{
      const top = el.getBoundingClientRect().top;
      if(top < triggerBottom) el.classList.add("visible");
    });
  }
  window.addEventListener("scroll", checkScroll);
  window.addEventListener("load", checkScroll);

  // PWA instalación
  let deferredPrompt;
  window.addEventListener("beforeinstallprompt", (e)=>{
    e.preventDefault();
    deferredPrompt = e;
    document.getElementById("instalarApp").style.display="block";
  });

  document.getElementById("instalarApp").addEventListener("click", async ()=>{
    if(deferredPrompt){
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if(outcome==="accepted") console.log("App instalada");
      deferredPrompt=null;
    }
  });

  // Service Worker con actualización automática
  if("serviceWorker" in navigator){
    navigator.serviceWorker.register("/sw.js").then(reg=>{
      console.log("SW registrado");

      reg.onupdatefound = ()=>{
        const newWorker = reg.installing;
        newWorker.onstatechange = ()=>{
          if(newWorker.state==="installed"){
            if(navigator.serviceWorker.controller){
              const banner=document.createElement("div");
              banner.style.position="fixed";
              banner.style.bottom="20px";
              banner.style.left="50%";
              banner.style.transform="translateX(-50%)";
              banner.style.background="#5F48D7";
              banner.style.color="#fff";
              banner.style.padding="12px 20px";
              banner.style.borderRadius="12px";
              banner.style.cursor="pointer";
              banner.style.zIndex="9999";
              banner.textContent="Nueva versión disponible, click para actualizar";
              banner.onclick=()=>{
                newWorker.postMessage({type:"SKIP_WAITING"});
                window.location.reload();
              };
              document.body.appendChild(banner);
            }
          }
        };
      };
    });
  }
</script>
  <script src="/main.js" defer></script>
</body>
</html>
